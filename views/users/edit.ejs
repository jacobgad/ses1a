<% layout('/layouts/boilerplate') %>
<div class="card shadow col-lg-4 offset-lg-4 mt-5">
	<img
		src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2100&q=80"
		class="card-img-top"
	/>
	<div class="card-body">
		<h1 class="card-title">Edit User</h1>
		<form action="/users/<%= user.username %>?_method=PUT" method="POST" class="needs-validation" novalidate>
			<div class="mb-3">
				<label class="form-label" for="newUsername">Username</label>
				<input class="form-control" type="text" name="newUsername" id="newUsername" value="<%= user.username %>" required />
				<div class="invalid-feedback">Please choose a username.</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="email">Email</label>
				<input class="form-control" type="email" name="email" id="email" value="<%= user.email %>" required />
				<div class="invalid-feedback">Please enter a valid email</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="password">New Password</label>
				<input class="form-control" type="password" name="password" id="password" />
				<div class="invalid-feedback">Please enter a strong password</div>
			</div>
			<div class="d-grid gap-2">
				<button class="btn btn-success">Update</button>
				<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteAccount">
					Delete Account
				</button>
			</div>
		</form>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="deleteAccount" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Permanently Delete Account</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				This action is not reversable, and will permanently delete all data related to your account
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<form action="/users/<%= user.username %>?_method=DELETE " method="POST">
					<button type="submit" class="btn btn-danger">Delete Account</button>
				</form>
			</div>
		</div>
	</div>
</div>
